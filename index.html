<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Meat Dept Spot Scanner</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 16px; }
    #wrap { max-width: 820px; margin: 0 auto; }
    button { font-size: 18px; padding: 10px 12px; margin-right: 8px; }
    #reader { width: 100%; border-radius: 12px; overflow: hidden; background:#000; }
    #result { background:#f4f4f4; border-radius:12px; padding:14px; margin-top:12px; }
    .big { font-size: 36px; font-weight: 900; }
    .sub { opacity: 0.85; margin-top: 6px; }
    textarea { width: 100%; min-height: 170px; margin-top: 10px; font-size: 14px; padding: 10px; border-radius: 10px; }
    .pill { display:inline-block; padding: 6px 10px; border-radius: 999px; background:#e8e8e8; margin-left: 6px; }
  </style>
</head>
<body>
<div id="wrap">
  <h2>Meat Dept Spot Scanner</h2>
  <div class="sub">Scan UPC → shows <b>SPOT 1–4 + A/B</b> <span class="pill">Android Chrome</span></div>

  <div style="margin:12px 0;">
    <button id="startBtn">Start Scan</button>
    <button id="stopBtn" disabled>Stop</button>
    <span class="sub" id="statusText"></span>
  </div>

  <div id="reader"></div>

  <div id="result">
    <div class="big" id="spotText">Ready</div>
    <div class="sub" id="descText">Tap Start Scan</div>
    <div class="sub" id="upcText"></div>
  </div>

  <h3>UPC → Spot List</h3>
  <div class="sub">Format: <b>UPC,SPOT,ZONE,DESCRIPTION</b> (ZONE = A or B)</div>
  <textarea id="dbEditor">044700012345,2,B,Oscar Mayer Ham
028000000111,1,A,Lunchables
021130012222,3,B,Bacon</textarea>
  <button id="saveBtn">Save List</button>
</div>

<!-- html5-qrcode library -->
<script src="https://unpkg.com/html5-qrcode@2.3.10/html5-qrcode.min.js"></script>

<script>
  const spotText = document.getElementById("spotText");
  const descText = document.getElementById("descText");
  const upcText  = document.getElementById("upcText");
  const statusText = document.getElementById("statusText");
  const dbEditor = document.getElementById("dbEditor");
  const saveBtn = document.getElementById("saveBtn");
  const startBtn = document.getElementById("startBtn");
  const stopBtn  = document.getElementById("stopBtn");

  const DB_KEY = "m_
